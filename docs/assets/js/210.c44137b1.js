(window.webpackJsonp=window.webpackJsonp||[]).push([[210],{540:function(a,t,s){"use strict";s.r(t);var e=s(12),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"_1-命令简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-命令简介"}},[a._v("#")]),a._v(" 1.命令简介")]),a._v(" "),t("p",[a._v("iptables-restore 恢复 IP 表。")]),a._v(" "),t("p",[a._v("ip6tables-restore 恢复 IPv6 表。")]),a._v(" "),t("p",[a._v("iptables-restore 和 ip6tables-restore 用于从 STDIN 或文件中指定的数据恢复 IP 和 IPv6 表。")]),a._v(" "),t("p",[a._v("iptables-restore 和 ip6tables-restore 均是 xtables-multi 的软链。")]),a._v(" "),t("h2",{attrs:{id:"_2-命令格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-命令格式"}},[a._v("#")]),a._v(" 2.命令格式")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("iptables-restore [-chntvV] [-w secs] [-W usecs] [-M modprobe] [-T name] [file]\n")])])]),t("h2",{attrs:{id:"_3-选项说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-选项说明"}},[a._v("#")]),a._v(" 3.选项说明")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("-c, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--counters")]),a._v("\n\t指定在还原 iptables 表时候，还原当前的数据包计数器和字节计数器的值。\n-h, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v("\n\t打印一个简短的选项摘要。\n-n, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--noflush")]),a._v("\n\t不要刷新表的先前内容。如果没有指定，这两个命令将刷新"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("删除"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("各自表的所有先前内容。\n-t, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--test")]),a._v("\n\t只解析和构造规则集，但不提交它。\n-v, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--verbose")]),a._v("\n\t在规则集处理期间打印额外的调试信息。\n-V, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v("\n\t打印程序版本号。\n-w, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--wait")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\t等待 xtables 锁。为了防止程序的多个实例并发运行，将尝试在启动时获得排他锁。默认情况下，如果无法获得锁，程序将退出。此选项将使程序等待"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("无限期或可选的几秒"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("，直到获得独占锁。\n-W, --wait-interval "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("microseconds"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t每次迭代等待的间隔。当运行对延迟敏感的应用程序时，等待 xtables 锁的时间可能是不可接受的。该选项将使每次迭代花费指定的时间。缺省值为1秒。此选项仅和 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-w")]),a._v(" 一起使用。\n-M，--modprobe "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("modprobe_program"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t指定 modprobe 程序的路径。默认情况下，iptables-restore 将检查 /proc/sys/kernel/modprobe 以确定可执行文件的路径。\n-T, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--table")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t指定要还原表的名称。\n")])])]),t("h2",{attrs:{id:"_4-常用示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-常用示例"}},[a._v("#")]),a._v(" 4.常用示例")]),a._v(" "),t("p",[a._v("（1）还原 iptables 配置。")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables-restore "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" iptables.bak\n")])])]),t("p",[a._v("（2）指定在还原 iptables 表时候，还原当前的数据包计数器和字节计数器的值。")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables-restore "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" iptables.bak\n")])])]),t("p",[a._v("（3）指定要还原表的名称。")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables-restore "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-T")]),a._v(" filter "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" filter.bak\n")])])]),t("hr"),a._v(" "),t("h2",{attrs:{id:"参考文献"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[a._v("#")]),a._v(" 参考文献")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://man7.org/linux/man-pages/man8/iptables-restore.8.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("iptables-restore(8) - Linux manual page - man7.org"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=r.exports}}]);