(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{536:function(t,a,e){"use strict";e.r(a);var s=e(12),n=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-命令简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-命令简介"}},[t._v("#")]),t._v(" 1.命令简介")]),t._v(" "),a("p",[t._v("ethtool（ethernet tool）查询或控制网络驱动程序和硬件设置。")]),t._v(" "),a("p",[t._v("利用 ethtool 可以根据需要更改以太网卡的参数，包括自动协商、速度、双工和局域网唤醒等参数。")]),t._v(" "),a("h2",{attrs:{id:"_2-命令格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-命令格式"}},[t._v("#")]),t._v(" 2.命令格式")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" DEVNAME\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" -h"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("--help\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" DEVNAME "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ARG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h2",{attrs:{id:"_3-选项说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-选项说明"}},[t._v("#")]),t._v(" 3.选项说明")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("-a, --show-pause\n\t查看网卡中接收模块 RX、发送模块 TX 和 Autonegotiate 模块的状态：启动 on 或停用 off。\n-A, --pause <devname> [autoneg on|off] [rx on|off] [tx on|off]\n\t修改网卡中接收模块 RX、发送模块 TX 和 Autonegotiate 模块的状态：启动 on 或停用 off。\n-c, --show-coalesce\n\t查询指定网络设备的合并信息。\n-C, --coalesce\n\t更改指定网络设备的合并设置。\n-g, --show-ring\n\t显示指定以太网卡的 rx/tx 环参数信息。。\n-G, --set-ring\n\t更改指定以太网卡的 rx/tx 环设置。\n-i, --driver\n\t显示网卡驱动的信息，如驱动的名称、版本等。\n-d, --register-dump <devname> [raw on|off] [hex on|off] [file name]\n\t显示 register dump 信息，部分网卡驱动不支持该选项。\n-e, --eeprom-dump <devname> [raw on|off] [offset N] [length N]\n\t显示 EEPROM dump 信息，部分网卡驱动不支持该选项。\n-E, --change-eeprom\n\t修改网卡 EEPROM byte。\n-k, --show-features, --show-offload <devname>\n\t显示网卡 Offload 参数的状态：on 或 off，包括 rx-checksumming、tx-checksumming 等。\n-K, --features, --offload <devname> <feature> on|off ...\n\t修改网卡 Offload 参数的状态。\n-p, --identify <devname> [N]\n\t用于区别不同 ethX 对应网卡的物理位置，常用的方法是使网卡 port 上的 led 不断的闪；N 指示了网卡闪的持续时间，以秒为单位。\n-P, --show-permaddr\n\t向指定的网络设备查询永久硬件地址。\n-r, --negotiate <devname>\n\t如果 auto-negotiation 模块状态为 on，则 restarts auto-negotiation。\n-S, --statistics\n\t显示 NIC- and driver-specific 的统计参数，如网卡接收/发送的字节数、接收/发送的广播包个数等。\n-t, --test\n\t让网卡执行自我检测，有两种模式：offline or online。\n-s, --change\n\t修改网卡的部分配置，包括网卡速度、单工/全双工模式、MAC 地址等。\n-h, --help\n\t显示帮助信息。\n--version\n\t显示版本信息。\n")])])]),a("p",[t._v("参数 devname 为网卡名称，可通过 ip 或 ifconfig 命令查看。")]),t._v(" "),a("h2",{attrs:{id:"_4-常用示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-常用示例"}},[t._v("#")]),t._v(" 4.常用示例")]),t._v(" "),a("p",[t._v("（1）查询网卡基本设置。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" eth0\nSettings "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" eth0:\n\tLink detected: "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v("\n")])])]),a("p",[t._v("（2）查询网卡驱动相关信息。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" eth0\ndriver: virtio_net\nversion: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(".0\nfirmware-version: \nexpansion-rom-version: \nbus-info: 0000:00:05.0\nsupports-statistics: no\nsupports-test: no\nsupports-eeprom-access: no\nsupports-register-dump: no\nsupports-priv-flags: no\n")])])]),a("p",[t._v("（3）查询网卡收发包统计。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-S")]),t._v(" eth0\nno stats available\n")])])]),a("p",[t._v("（4）查询网卡注册信息。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" eth0\nCannot get register dump: Operation not supported\n")])])]),a("p",[t._v("（5）设置网卡自适应模式。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" eth0\n")])])]),a("p",[t._v("（6）设置网卡速率等信息。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" eth0 autoneg off speed "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" duplex full \n")])])]),a("p",[t._v("（7）停止网卡的发送模块 TX。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-A")]),t._v(" tx off eth0\n")])])]),a("p",[t._v("（8）使网卡灯闪烁 10 次。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" eth0 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])])]),a("p",[t._v("操作完毕后，看哪块网卡的 LED 灯在闪，eth0 就对应着哪块网卡。")]),t._v(" "),a("p",[t._v("（9）显示网卡 Offload 参数的状态。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-k")]),t._v(" eth0\nFeatures "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" eth0:\nrx-checksumming: on "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fixed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ntx-checksumming: on\n\ttx-checksum-ipv4: off "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fixed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\ttx-checksum-ip-generic: on\n\ttx-checksum-ipv6: off "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fixed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\ttx-checksum-fcoe-crc: off "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fixed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\ttx-checksum-sctp: off "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fixed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nscatter-gather: on\n\ttx-scatter-gather: on\n\ttx-scatter-gather-fraglist: off "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fixed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ntcp-segmentation-offload: on\n\ttx-tcp-segmentation: on\n\ttx-tcp-ecn-segmentation: on\n\ttx-tcp6-segmentation: on\n\ttx-tcp-mangleid-segmentation: off\nudp-fragmentation-offload: on\ngeneric-segmentation-offload: on\ngeneric-receive-offload: on\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nl2-fwd-offload: off "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fixed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nhw-tc-offload: off "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fixed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nrx-udp_tunnel-port-offload: off "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fixed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("（10）关闭网卡对收到的数据包的校验功能。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-K")]),t._v(" eth0 rx off\n")])])]),a("p",[t._v("（11）显示 EEPROM dump 信息。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ethtool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" eth0\nCannot get EEPROM data: Operation not supported\n")])])]),a("h2",{attrs:{id:"_5-拓展知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-拓展知识"}},[t._v("#")]),t._v(" 5.拓展知识")]),t._v(" "),a("p",[t._v("下面的信息将帮助你了解以太网卡的工作原理。")]),t._v(" "),a("ul",[a("li",[t._v("半双工：半双工模式允许设备一次只能发送或接收数据包。")]),t._v(" "),a("li",[t._v("全双工：全双工模式允许设备可以同时发送和接收数据包。")]),t._v(" "),a("li",[t._v("自动协商：自动协商是一种机制，允许设备自动选择最佳网速和工作模式（全双工或半双工模式）。")]),t._v(" "),a("li",[t._v("速度：默认情况下，它会使用最大速度，你可以根据自己的需要改变它。")]),t._v(" "),a("li",[t._v("链路检测：链路检测可以显示网卡的状态。如果显示为 no，请尝试重启网卡。如果链路检测仍显示 no，则检查交换机与系统之间连接的线缆是否有问题。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"参考文献"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[t._v("#")]),t._v(" 参考文献")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://man7.org/linux/man-pages/man8/ethtool.8.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ethtool(8) - Linux manual page - man7.org"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/146383216",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何使用ethtool 命令管理以太网卡| Linux 中国 - 知乎专栏"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/dengjin20104042056/article/details/99880335",target:"_blank",rel:"noopener noreferrer"}},[t._v("一步一步学Linux——ethtool命令(155)"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://wangchujiang.com/linux-command/c/ethtool.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux ethtool 命令详解：显示或修改以太网卡的配置信息"),a("OutboundLink")],1)]),t._v(" "),a("Vssue",{attrs:{title:"ethtool"}})],1)}),[],!1,null,null,null);a.default=n.exports}}]);