(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{519:function(e,a,r){"use strict";r.r(a);var t=r(12),n=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"_1-命令简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-命令简介"}},[e._v("#")]),e._v(" 1.命令简介")]),e._v(" "),a("p",[e._v("ar（ARchiver）命令是 "),a("a",{attrs:{href:"https://www.gnu.org/software/binutils/",target:"_blank",rel:"noopener noreferrer"}},[e._v("GNU Binutils"),a("OutboundLink")],1),e._v(" 的一员，可以用来创建、修改静态库，也可以从静态库中提取单个模块。")]),e._v(" "),a("p",[e._v("静态库是一个独立的文件，里面包含了按照特定的结构组织起来的其它的一些文件（称做此库文件的 member）。原始文件的内容、访问模式、时间戳、属主和组等属性都保留在库文件中。")]),e._v(" "),a("h2",{attrs:{id:"_2-命令格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-命令格式"}},[e._v("#")]),e._v(" 2.命令格式")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ar [--plugin <name>] [-X32_64] [-]<d|m|p|q|r|s|t|x>[abcDfilNoPsSTuUvV [relpos] [count]] [--target <bfdname>] [archive] [member...]\n")])])]),a("p",[e._v("其中连字符"),a("code",[e._v("[-]")]),e._v("是可选的，选项"),a("code",[e._v("<d|m|p|q|r|s|t|x>")]),e._v("为操作选项，使用时只能使用其中一个，选项"),a("code",[e._v("[abcDfilNoPsSTuUvV]")]),e._v("为修饰选项，用来修饰操作选项，与操作选项配合使用时，二者的顺序可以任意。"),a("code",[e._v("[relpos]")]),e._v("表示库中的成员名，用于加入新文件时指定相对位置，与选项a、b和i结合使用。"),a("code",[e._v("[count]")]),e._v("表示在库中有多个同名的成员时，指定提取或删除的个数。"),a("code",[e._v("[archive]")]),e._v("为库名称，"),a("code",[e._v("[member...]")]),e._v("为库的成员名称。")]),e._v(" "),a("h2",{attrs:{id:"_3-选项说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-选项说明"}},[e._v("#")]),e._v(" 3.选项说明")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("#操作选项说明\nd：Delete，从库中删除由[member...]指定的模块，如果使用了修饰选项v则列出被删除的每个模块\nm：Move，该操作是在一个库中移动成员。当库中如果有若干模块有相同的符号定义（如函数定义），则成员的位置顺序很重要。如果没有指定任选项，任何指定的成员将移到库的最后。也可以使用a，b或i选项指定移动到的位置\np：Print，显示库中指定的成员到标准输出。如果指定修饰选项v，则在输出成员的内容前，将显示成员的名字。如果没有指定成员的名字，所有库中的文件将显示出来\nq：Quick append，快速追加。增加新模块到库的结尾处。并不检查是否需要替换。a，b或 i 修饰选项对此操作没有影响，模块总是追加到库的结尾处。如果使用了修饰选项v则列出每个模块。这时，库的符号表没有更新，可以用ar s或ranlib来更新库的符号表索引\nr：Replacement，以替换模式向库中插入成员。当插入的模块名已经在库中存在，则替换同名的模块。默认的情况下，新的成员增加在库的结尾处，可以使用其他任选项a，b或i来改变增加的位置\ns：写入一个目标文件索引到库中，或者更新一个存在的目标文件索引。甚至对于没有任何变化的库也作该动作。对一个库做ar s等同于对该库做ranlib。注意，s也可以作为修饰选项来使用\nt：Table，显示库的模块表清单。如果指定文件名称，则仅显示指定的那些文件。如果不指定任何文件，则列出库中的所有文件。一般只显示模块名，如果结合选项v可显示文件的访问权限、时间戳、属主和组等信息\nx：eXtract，从库中提取一个成员。如果不指定要提取的模块，则提取库中所有的模块\n\n#修饰选项说明\na：After，在库的一个已经存在的成员后面增加一个新的文件。已经存在的成员由relpos 参数指定\nb：Before，在库的一个已经存在的成员前面增加一个新的文件。已经存在的成员由relpos 参数指定\nc：Create，创建一个库。不管库是否存在，都将创建\nD：Deterministic，以确定性模式操作。添加文件和存档索引时，对uids、gid、时间戳使用零，对所有文件使用一致的文件模式。使用此选项时，如果ar与相同的选项和相同的输入文件一起使用，则多次运行将创建相同的输出文件，而不考虑输入文件的所有者、组和文件。模式或修改时间。如果binutils配置为--enable deterministic archives，那么默认情况下，此模式为on。可以使用下面的U修饰符禁用它\nf：在库中截短指定的名字。缺省情况下，文件名的长度是不受限制的，可以使用此参数将文件名截短，以保证与其它系统的兼容\ni：Insert，在库中一个已经存在的成员前面增加一个新的文件已经存在的成员由relpos 参数指定（类似选项b）\nl：暂未使用\nN：与[count]参数一起使用，在库中有多个相同的文件名时指定提取或删除的个数\no：Original，当提取成员时，保留成员的原始数据。如果不指定该选项，则提取出的模块的时间将标为提取出的时间\nP：进行文件名匹配时使用全路径名。ar在创建库时不能使用全路径名（这样的库文件不符合POSIX标准），但是有些工具可以。此选项将导致GNU AR使用完整的路径名匹配文件名，这在从另一个工具创建的存档中提取单个文件时非常方便\ns：等同于操作选项s，具体见必选项s的说明\nS：不创建目标文件索引，这在创建较大的库时能加快时间\nT：Thin，将指定的存档设为精简存档。如果库已经存在并且是常规库，则现有成员必须与存档位于同一目录中\nu：一般说来，命令ar r member...插入所有列出的文件到库中，如果你只想插入列出文件中那些比库中同名文件新的文件，可以使用该选项。该选项只与 r 操作选项一起使用\nU：Undeterministic，不要在确定性模式下操作。这与上面的D选项相反：被添加的文件和存档索引将获得它们的实际uid、gid、时间戳和文件访问权限模式值。\nv：该选项用来显示执行操作选项的附加信息\nV,--version：显示ar的版本信息\n\n#其它选项说明\n--help：显示ar的帮助信息\n--plugin：使ar加载指定的插件，这增加了对更多文件格式的支持。只有工具链构建时开启了插件支持的情况下，此选项才可用\n-X32_64：此选项是GNU ar的默认选项，AR不支持任何其他-X选项，比如-x32，此选项是AIX ar的默认选项\n--target：当库成员的目标文件格式与系统的默认格式不同时指定具体的格式\n")])])]),a("h2",{attrs:{id:"_4-常用示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-常用示例"}},[e._v("#")]),e._v(" 4.常用示例")]),e._v(" "),a("p",[e._v("（1）创建一个静态库。")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("ar crv libtest.a hello.o dablelv.o\n")])])]),a("p",[e._v("（2）从静态库中提取指定目标文件。")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("ar x /usr/lib64/libc.a errno.o\n")])])]),a("p",[e._v("（3）查看静态库中指定目标文件的详细信息。")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("ar tv /usr/lib64/libc.a errno.o\nrw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1000")]),e._v("/135   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1106")]),e._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("14")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("10")]),e._v(":14 "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2017")]),e._v(" errno.o\n")])])]),a("p",[e._v("（4）从静态库中要删除一个成员。注意，删除前请备份C标准静态库libc.a。")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("ar dv libc.a strlen.o\n")])])]),a("hr"),e._v(" "),a("h2",{attrs:{id:"参考文献"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[e._v("#")]),e._v(" 参考文献")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://man7.org/linux/man-pages/man1/ar.1.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("ar(1) — Linux manual page - man7.org"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/binutils/",target:"_blank",rel:"noopener noreferrer"}},[e._v("GNU Binutils"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/xuhongning/article/details/6365200",target:"_blank",rel:"noopener noreferrer"}},[e._v("linux ar命令"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Ar_(Unix)",target:"_blank",rel:"noopener noreferrer"}},[e._v("ar (Unix).wikipedia"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);