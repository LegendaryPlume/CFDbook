(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{575:function(t,a,n){"use strict";n.r(a);var r=n(12),e=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-命令简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-命令简介"}},[t._v("#")]),t._v(" 1.命令简介")]),t._v(" "),a("p",[t._v("crontab（cron table） 维护用户 crontab 文件。")]),t._v(" "),a("p",[t._v("Linux 周期性任务 与 Windows 下的计划任务类似，当安装完操作系统后，默认会安装此服务工具，并且会自动启动 crond 进程。crond 进程每分钟会检查是否有要执行的任务，如果有则执行该任务。")]),t._v(" "),a("p",[t._v("Linux 下的任务调度分为两类：系统任务调度和用户任务调度。")]),t._v(" "),a("p",[t._v("系统任务调度：系统周期性所要执行的工作，比如写缓存数据到硬盘、日志清理等。/etc/crontab 文件是系统任务调度的配置文件。")]),t._v(" "),a("p",[t._v("用户任务调度：用户定期要执行的工作，比如用户数据备份、定时邮件提醒等。用户可以使用 crontab 工具来定制自己的计划任务。所有用户定义的 crontab 文件都被保存在 /var/spool/cron 目录中，其文件名与用户名一致。")]),t._v(" "),a("p",[t._v("系统管理员可以通过 /etc/cron.deny 和 /etc/cron.allow 这两个文件来禁止或允许用户拥有自己的 crontab 文件。")]),t._v(" "),a("h2",{attrs:{id:"_2-命令格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-命令格式"}},[t._v("#")]),t._v(" 2.命令格式")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("crontab [-u USER] FILE\ncrontab [-u USER] [-l | -r | -e] [-i] [-s]\ncrontab -n [ HOSTNAME ]\ncrontab -c\n")])])]),a("h2",{attrs:{id:"_3-选项说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-选项说明"}},[t._v("#")]),t._v(" 3.选项说明")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("-u\n\t指定要设置定时任务的用户名\n-l\n\t列出当前的定时任务\n-r\n\t删除定时任务\n-e\n\t编辑用户的定时任务。任务保存在 /var/spool/cron 目录下与用户名同名的文件中\n-i\n\t在删除定时任务前询问用户是否确定删除\n-s\n\t在进行编辑/替换之前，将当前的 SELinux 安全上下文字符串作为 MLS_LEVEL 附加到 crontab 文件\n-n [HOSTNAME]\n\t此选项只有当 cron(8) 使用 -c 选项启动以支持集群环境时才使用，用于指定集群中哪个主机执行定时 crontab 文件中的定时任务。如果省略了主机名，则使用 gethostname(2) 返回的本地主机名\n-c\n\t此选项只有当 cron(8) 使用 -c 选项启动以支持集群环境时才使用，用于查询集群中当前哪个主机执行定时 crontab 文件中的定时任务\n")])])]),a("h2",{attrs:{id:"_4-用户配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-用户配置文件"}},[t._v("#")]),t._v(" 4.用户配置文件")]),t._v(" "),a("p",[t._v("crontab 文件保存了用户的定时任务，以特定格式保存在 /var/spool/cron 目录下与用户名同名的文件中。例如如果是 root 用户，那么添加任务时，会在该目录下有一个 root 文件。Linux 的 cron 服务会每隔一分钟读取一次 /var/spool/cron 目录下面所有的内容。")]),t._v(" "),a("p",[t._v("crontab 文件每一行代表一项任务，每项任务分为六个字段，前五个字段是时间字段，第六个字段是要执行的命令，格式如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("minute hour day month week command\n")])])]),a("p",[t._v("minute 分钟，取值范围 0 到 59；\nhour 小时，取值范围 0 到 23；\nday 日期，取值范围 1 到 31；\nmonth 月份，取值范围 1 到 12，或 jan,feb,mar,apr...；\nweek 星期，取值范围 0 到 7，或 sun,mon,tue,wed,thu,fri,sat。注意 0 和 7 均代表星期日；\ncommand 要执行的命令，可以是系统命令，也可以是自己编写的脚本文件；")]),t._v(" "),a("p",[t._v("在以上各个时间字段中，还可以使用以下特殊字符：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("* 表示所有可能的值，例如 minute 是 *，表示每分钟都执行命令\n, 可以用逗号隔开的值指定一个列表，例如，1,2,5,7,8,9\n- 可以用整数之间的横杠表示一个范围，例如 2-6 表示 2,3,4,5,6 \n/ 可以用斜杠指定时间的间隔频率，例如 minute 为 */2 表示每两分钟执行一次命令\n")])])]),a("p",[t._v("注意，crontab 文件注释符号为 #。")]),t._v(" "),a("h2",{attrs:{id:"_5-系统配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-系统配置文件"}},[t._v("#")]),t._v(" 5.系统配置文件")]),t._v(" "),a("p",[t._v("除了用户的 crontab 文件，与定时任务相关的系统配置文件有：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/etc/crontab\t\t\t系统定时任务配置文件\n/etc/cron.d/\t\t\t自动定期需要做的任务\n/etc/cron.hourly\t\t每小时执行一次的任务\n/etc/cron.daily\t\t\t每天执行一次的任务\n/etc/cron.weekly\t\t每周执行一次的任务\n/etc/cron.monthly\t\t每月执行一次的任务\n/etc/cron.allow    \t\t该文件中所列用户允许执行定时任务\n/etc/cron.deny    \t\t该文件中所列用户不允许执行定时任务\n/var/log/cron\t\t\tcrontab 的日志文件\n")])])]),a("p",[t._v("Linux 的 cron 服务会每隔一分钟去读取一次 /etc/crontab 文件和 /etc/cron.d 目录下面所有的内容。/etc/cron.hourly、/etc/cron.daily、/etc/cron.weekly 和 /etc/cron.monthly 下的任务也会间接按照相应的周期被调用。")]),t._v(" "),a("h2",{attrs:{id:"_6-常用示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-常用示例"}},[t._v("#")]),t._v(" 6.常用示例")]),t._v(" "),a("p",[t._v("（1）添加定时任务。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("crontab -e\n* * * * * command\t\t\t# 每分钟执行一次 command\n3,15 * * * * command\t\t# 每小时的第 3 和第 15 分钟执行\n3,15 8-11 * * * command\t\t# 上午 8 点到 11点每小时第 3 和第 15 分钟执行\n3,15 8-11 * * 1 command\t\t# 每个星期一的上午 8 点到 11 点的第 3 和第 15 分钟执行\n3,15 8-11 1 * * command\t\t# 每个月一号上午 8 点到 11 点的第 3 和第 15 分钟执行\n3,15 8-11 1 1 * command\t\t# 每年一月一号上午 8 点到 11 点的第 3 和第 15 分钟执行\n0 */2 * * * /sbin/service httpd restart\t# 每隔两个小时在第 0 分时候重启一次 httpd\n")])])]),a("p",[t._v("（2）查看定时任务。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("crontab -l\n")])])]),a("p",[t._v("（3）删除定时任务。")]),t._v(" "),a("p",[t._v("删除定时任务会清除 /var/spool/cron 目录下与用户同名的 crontab 文件。危险动作，请注意备份。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("crontab -r\n")])])]),a("p",[t._v("（4）将指定的 crontab 文件还原到 /var/spool/cron 目录下。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("crontab FILE\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"参考文献"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[t._v("#")]),t._v(" 参考文献")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://man7.org/linux/man-pages/man1/crontab.1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("crontab(1) - Linux manual page - man7.org"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"http://man7.org/linux/man-pages/man5/crontab.5.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("crontab(5) - Linux manual page - man7.org"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/dengjin20104042056/article/details/99315016",target:"_blank",rel:"noopener noreferrer"}},[t._v("一步一步学Linux——crontab命令(132) - CSDN博客"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/zoulongbin/p/6187238.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux 定时任务crontab_014"),a("OutboundLink")],1)]),t._v(" "),a("Vssue",{attrs:{title:"crontab"}})],1)}),[],!1,null,null,null);a.default=e.exports}}]);