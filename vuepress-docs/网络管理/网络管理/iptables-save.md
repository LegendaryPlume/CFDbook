## 1.命令简介

iptables-save/ip6tables-save 转储 iptables 规则。

iptables-save 和 ip6tables-save 用于转储 IP 或 IPv6 表在容易解析的格式或 STDOUT 或到指定的文件。

iptables/ip6tables 均是 xtables-multi 的软链。

## 2.命令格式
```
iptables-save [-M modprobe] [-c] [-t table] [-f filename]
```

## 3.选项说明

```shell
-M, --modprobe <modprobe_program>
	指定 modprobe 程序的路径。默认情况下，iptables-save 将检查 /proc/sys/kernel/modprobe 以确定可执行文件的路径。
-f, --file <filename>
	指定要记录输出到的文件名。如果没有指定，将输出到 STDOUT。
-c, --counters
	在输出中包含所有数据包和字节计数器的当前值。
-t, --table <tablename>
	将输出限制为一个表。如果内核配置了自动模块加载，如果该表不存在，则会尝试为该表加载相应的模块。

	如果未指定，输出所有可用的表。
```

## 4.常用示例

（1）指定要保存的表的名称。

```shell
iptables-save  -t filter > filter.bak
```

（2）保存当前的数据包计算器和字节计数器的值。

```shell
iptables-save -c
# Generated by iptables-save v1.4.21 on Sat Dec 17 17:05:12 2022
*filter
:INPUT ACCEPT [8397115:1774409253]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [8446458:1291918085]
COMMIT
# Completed on Sat Dec 17 17:05:12 2022
```

---

## 参考文献
[iptables-save(8) - Linux manual page - man7.org](https://man7.org/linux/man-pages/man8/iptables-save.8.html)

<Vssue title="iptables-save" />